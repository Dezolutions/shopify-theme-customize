{{ 'featured-products.css' | asset_url | stylesheet_tag }}
<script src="{{ 'featured-product-form.js' | asset_url }}" defer="defer"></script>
<link href="https://fonts.cdnfonts.com/css/arial-2" rel="stylesheet">

               
<h1 class="featured-prodcuts__title">{{ section.settings.title }}</h1>

  <div class="featured-products">
  
    {% for product in collections[section.settings.selected_collection].products %}
  
      {% comment %} Check if the product is in the cart {% endcomment %}
      {% assign product_not_in_cart = true %}
      {% for item in cart.items %}
        {%if  item.product == product %}
          {% assign product_not_in_cart = false %}
        {% endif %}
      {% endfor %}
  
      {% if product_not_in_cart and product.available %}
          {% render 'featured-product', featured_product: product %}
        
      {% endif %}
    {% endfor %}
    
    {% for block in section.blocks %}
      {% if block.type == 'product-block' %}

        {% assign product = block.settings.product %}
        {% comment %} Check if the product is in the cart {% endcomment %}
        {% assign product_not_in_cart = true %}
        {% for item in cart.items %}
          {%if  item.product == product %}
            {% assign product_not_in_cart = false %}
          {% endif %}
        {% endfor %}

        {% if product != nil and product_not_in_cart %}
          {% render 'featured-product', featured_product: product %}
        {% endif %}

      {% endif %}
    {% endfor %}

  </div>



{% schema %}
  {
    "name": "t:sections.featured-products.name",
    "tag": "section",
    "settings": [
      {
        "type": "collection",
        "label": "t:sections.featured-products.settings.collection.label",
        "id": "selected_collection"
      },
      {
        "type": "text",
        "id": "title",
        "label": "t:sections.featured-products.settings.title.label",
        "default": "Featured Products"
      }
    ],
    "blocks": [
    {
      "type": "product-block",
      "name": "t:sections.featured-products.blocks.name",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "t:sections.featured-products.blocks.settings.label"
        }
      ]
    }
  ],
    "presets": [
      {
        "name": "t:sections.featured-products.presets.name",
        "category": "Custom",
        "settings": {
          "selected_collection": "all"
        }
      }
    ]
  }
{% endschema %}